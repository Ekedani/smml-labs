---
title: "Лабораторна робота 1. Отримання і очищення даних"
author: "Команда №15"
date: "14.02.2024"
output: html_notebook
---

Для виконання даної лабораторної роботи необхідно завантажити та активувати пакет "data.table", що буде використовуватися для роботи з вхідними наборами даних.

```{r}
library(data.table)
```

Перейдемо до виконання завдання даної лабораторної роботи. Зчитаємо файли `train_X.txt` та `test_X.txt`, що містять навчальний та тестовий набори даних відповідно та об'єднаємо їх за допомогою функції `rbind` в один набір даних, що містить всі рядки з початкових наборів даних.

```{r}
train_X <- fread("train/X_train.txt")
test_X <- fread("test/X_test.txt")
combined_x <- rbind(train_X, test_X)
```

Перевіримо розмірність об'єднаного набору даних.

```{r}
dim(combined_x)
```

Зчитаємо з файлу `features.txt` описові назві змінних для подальшого їх присвоєння як назв стовпців об'єднаного набору даних.

```{r}
feature_names <- fread("features.txt")[, V2]
colnames(combined_x) <- feature_names
```

Перевіримо коректність зміни назв ствопців та цілісності даних шляхом виклику функції `head` для відповідного набору даних.

```{r}
head(combined_x)
```

Далі з об'єднаного набору даних оберемо лише стовпці що містять середні значення та значення стандартного відхилення для кожного з вимірювань. Для цього ми використаємо функцію `grep`, що шукає стовпці, назви яких містять std() або mean() та повертає їх індекси. Використання параметру `with` зі значенням `FALSE` у даному випадку дозволяє нам вказувати індекси необхідних стовпців.

```{r}
filtered_x <- combined_x[, grep("std\\(\\)|mean\\(\\)", colnames(combined_x)), with = FALSE]
```

Перевіримо коректність вибору стовпців за допомогою перевірки розмірності та імен стовпців фільтрованого набору даних.

```{r}
dim(filtered_x)
colnames(filtered_x)
```

Зчитаємо файли `train_y.txt` та `test_y.txt`, що містять навчальний та тестовий набори даних міток. Об'єднаємо їх за допомогою функції `rbind`.

```{r}
train_y <- fread("train/y_train.txt")
test_y <- fread("test/y_test.txt")
combined_y <- rbind(train_y, test_y)
```

Перевіримо розмірність об'єднаного набору даних міток. 

```{r}
dim(combined_y)
```

Зчитаємо файл `activity_labels.txt`, що містить описові назви дій у наборі даних міток. Також перейменуємо стовпець V2 відповідно до змісту набору даних. Для заміни числових значень на описові назви використаємо функцію `merge`. Також важливо зазначити, що для збереження оригінального порядку рядків в наборі даних необхідно встановити значення параметру `sort = FALSE`.

```{r}
activity_labels <- fread("activity_labels.txt")
setnames(activity_labels, old = "V2", new = "activity")
mapped_y <- merge(combined_y, activity_labels, by.x = "V1", by.y = "V1", sort = FALSE)[, .(activity)]
```

Для перевірки коректності виконання завдання виведемо перші 40 рядків набору даних.

```{r}
head(mapped_y, 40)
```

Об'єднаємо набори даних, отриман на попередніх етапах, в один очищений набір даних. Для цього використаємо функцію `cbind`, що об'єднає стовпці вхідних наборів дан

```{r}
cleansed_data <- cbind(filtered_x, mapped_y)
```

Перевіримо коректність виконання лабораторної роботи шляхом перевірки розмірності, імен стовпців та виведення перших значень результуючого очищеного набору даних.

```{r}
dim(cleansed_data)
colnames(cleansed_data)
head(cleansed_data)
```
